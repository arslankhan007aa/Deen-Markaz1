<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arslan Islamic | Ù‚Ø±Ø¢Ù† Ùˆ Ø­Ø¯ÛŒØ« Ú©ÛŒ Ø±ÙˆØ´Ù†ÛŒ</title>

    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&family=Amiri+Quran&family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #6a053c 0%, #a4125e 100%);
            --secondary-color: #FFD700; 
            --bg-color: #0f0a12; 
            --card-glass: rgba(255, 255, 255, 0.07);
            --border-radius-xl: 30px;
            --text-gold: #f3cf7a;
        }

        /* Fancy Urdu Font for Everything */
        * {
            font-family: 'Noto Nastaliq Urdu', serif;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1a1a1a; }
        ::-webkit-scrollbar-thumb { background: #6a053c; border-radius: 10px; }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(106, 5, 60, 0.2) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(255, 215, 0, 0.05) 0%, transparent 40%);
            background-attachment: fixed;
            direction: rtl; 
            text-align: right;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* --- 3-Dot Menu Style --- */
        .menu-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10001;
        }

        .dots-btn {
            background: var(--primary-gradient);
            border: 1.5px solid var(--secondary-color);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .dropdown-menu {
            position: absolute;
            top: 55px;
            right: 0;
            background: rgba(15, 10, 18, 0.98);
            border: 1px solid var(--secondary-color);
            border-radius: 15px;
            width: 250px;
            display: none;
            backdrop-filter: blur(10px);
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dropdown-menu.show { display: block; }

        .menu-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            color: white;
            text-decoration: none;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            transition: 0.3s;
            font-size: 0.9rem;
        }

        .menu-link:hover { background: var(--primary-gradient); }
        .menu-link i { color: var(--secondary-color); font-size: 1.2rem; }

        /* --- Animations --- */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* --- Fancy Header --- */
        .header-wrapper {
            padding: 40px 20px;
            text-align: center;
            animation: fadeInUp 0.8s ease-out;
        }

        .header {
            display: inline-block;
            padding: 25px 50px;
            background: var(--primary-gradient);
            border-radius: var(--border-radius-xl);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border: 2px solid var(--secondary-color);
            position: relative;
            overflow: hidden;
        }

        .header::after {
            content: '';
            position: absolute;
            top: 0;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.2), transparent);
            transform: skewX(-25deg);
            animation: shine 4s infinite;
        }

        .bismillah {
            font-size: 2.8em; 
            font-family: 'Amiri Quran', serif; 
            color: var(--secondary-color);
            margin-bottom: 10px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
        }
        
        .site-name {
            font-size: 2.2em; 
            font-family: 'Amiri Quran', serif; 
            color: #ffffff;
            font-weight: bold;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        }

        /* --- Auth Overlay --- */
        .auth-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(10, 10, 15, 0.95); backdrop-filter: blur(15px);
            z-index: 10000; display: flex; justify-content: center; align-items: center;
        }

        .auth-card {
            background: rgba(255, 255, 255, 0.05); 
            padding: 40px; 
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5); 
            width: 90%; max-width: 450px;
            border: 1px solid rgba(255,255,255,0.1);
            display: none; text-align: center;
            animation: fadeInUp 0.5s ease;
        }

        .auth-card.active { display: block; }

        .auth-card h2 { color: var(--secondary-color); margin-bottom: 25px; font-size: 2em; }

        .auth-card input, .auth-card select {
            width: 100%; padding: 15px; margin: 12px 0; 
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 12px; color: white;
            transition: 0.3s;
        }

        .auth-card input:focus { border-color: var(--secondary-color); outline: none; background: rgba(255,255,255,0.15); }

        .btn-auth {
            background: var(--primary-gradient); color: white;
            width: 100%; padding: 15px; border: none; border-radius: 50px;
            font-weight: bold; font-size: 1.4em; cursor: pointer; margin-top: 20px;
            transition: 0.4s; box-shadow: 0 10px 20px rgba(106, 5, 60, 0.3);
        }

        .btn-auth:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(106, 5, 60, 0.5); }

        /* --- Tabs System --- */
        .category-container {
            max-width: 1000px; margin: 0 auto; padding: 0 20px;
        }

        .category-tabs {
            display: flex; justify-content: center; flex-wrap: wrap; 
            margin-bottom: 40px; gap: 12px;
        }

        .category-btn {
            background: var(--card-glass);
            color: #ddd;
            border: 1px solid rgba(255,255,255,0.1);
            padding: 12px 24px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: 0.4s;
            backdrop-filter: blur(5px);
        }

        .category-btn.active {
            background: var(--primary-gradient);
            color: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        /* --- Main Hadith Card --- */
        .main-card-wrapper { max-width: 850px; margin: 0 auto; padding: 20px; }

        .hadith-card {
            background: var(--card-glass);
            border-radius: var(--border-radius-xl);
            padding: 40px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
            position: relative;
            animation: fadeInUp 1s ease;
        }

        .type-indicator {
            position: absolute; top: -15px; right: 50%; transform: translateX(50%);
            background: var(--secondary-color); color: #000;
            padding: 5px 25px; border-radius: 50px; font-weight: 800;
            font-size: 0.9em; box-shadow: 0 5px 15px rgba(255,215,0,0.3);
        }

        .hadith-text-arabic {
            font-size: 2.3em; line-height: 1.9; color: var(--text-gold); 
            margin: 30px 0; font-family: 'Amiri Quran', serif; text-align: center;
        }

        .hadith-text-urdu {
            font-size: 1.4em; padding: 25px; background: rgba(255,255,255,0.03); 
            border-right: 6px solid var(--secondary-color); border-radius: 15px;
            line-height: 2; color: #f0f0f0;
        }

        .reference { 
            margin-top: 30px; color: #aaa; text-align: left; 
            padding-top: 15px; font-size: 1em;
        }

        /* --- Action Buttons --- */
        .action-buttons { display: flex; justify-content: center; gap: 20px; margin-top: 40px; }

        .btn-action {
            background: var(--card-glass); color: white;
            border: 1px solid rgba(255,255,255,0.2);
            padding: 12px 35px; border-radius: 50px; 
            font-weight: bold; cursor: pointer; transition: 0.3s;
            display: flex; align-items: center; gap: 10px;
        }

        /* --- Floating Button --- */
        .fab {
            position: fixed; bottom: 30px; left: 30px;
            width: 60px; height: 60px; background: var(--primary-gradient);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            color: var(--secondary-color); font-size: 1.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3); cursor: pointer;
            z-index: 999;
        }

        @media (max-width: 768px) {
            .header { padding: 15px 25px; }
            .bismillah { font-size: 2em; }
            .site-name { font-size: 1.6em; }
        }
    </style>
</head>
<body>

<div class="menu-container">
    <button class="dots-btn" onclick="toggleMenu()">
        <i class="fas fa-ellipsis-v"></i>
    </button>
    <div id="dropdown" class="dropdown-menu">
        <a href="https://wa.me/923704624316" class="menu-link" target="_blank">
            <i class="fab fa-whatsapp"></i> Ø­Ø¯ÛŒØ« Ú©Û’ Ù„ÛŒÛ’ Ø§ÛŒÚˆÙ…Ù† Ø³Û’ Ø±Ø§Ø¨Ø·Û Ú©Ø±ÛŒÚº
        </a>
        <a href="#" class="menu-link" onclick="location.reload()">
            <i class="fas fa-sync-alt"></i> Ø±ÛŒ ÙØ±ÛŒØ´ Ú©Ø±ÛŒÚº
        </a>
        <a href="#" class="menu-link" onclick="alert('Ø§Ø±Ø³Ù„Ø§Ù† Ø§Ø³Ù„Ø§Ù…Ú© Ø³ÛŒÙ†Ù¹Ø± - ÙˆØ±Ú˜Ù† 2.0')">
            <i class="fas fa-info-circle"></i> ÛÙ…Ø§Ø±Û’ Ø¨Ø§Ø±Û’ Ù…ÛŒÚº
        </a>
    </div>
</div>

<div id="auth-layer" class="auth-overlay">
    <div id="register-card" class="auth-card active">
        <i class="fas fa-user-plus fa-3x" style="color: var(--secondary-color); margin-bottom: 15px;"></i>
        <h2>Ù†ÛŒØ§ Ø§Ú©Ø§Ø¤Ù†Ù¹ Ø¨Ù†Ø§Ø¦ÛŒÚº</h2>
        <input type="email" id="reg-email" placeholder="Ø¢Ù¾ Ú©Ø§ Ø§ÛŒ Ù…ÛŒÙ„">
        <input type="password" id="reg-pass" placeholder="Ù¾Ø§Ø³ÙˆØ±Úˆ">
        <button class="btn-auth" onclick="doRegister()">Ø±Ø¬Ø³Ù¹Ø± Ú©Ø±ÛŒÚº</button>
        <div style="margin-top: 20px;">
            <span style="color: #aaa;">Ù¾ÛÙ„Û’ Ø³Û’ Ø§Ú©Ø§Ø¤Ù†Ù¹ ÛÛ’ØŸ</span>
            <span class="switch-link" style="color: var(--secondary-color); cursor: pointer; font-weight: bold;" onclick="switchCard('login-card')"> Ù„Ø§Ú¯ Ø§Ù† Ú©Ø±ÛŒÚº</span>
        </div>
    </div>

    <div id="login-card" class="auth-card">
        <i class="fas fa-sign-in-alt fa-3x" style="color: var(--secondary-color); margin-bottom: 15px;"></i>
        <h2>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯! Ù„Ø§Ú¯ Ø§Ù† Ú©Ø±ÛŒÚº</h2>
        <input type="email" id="log-email" placeholder="Ø§ÛŒ Ù…ÛŒÙ„">
        <input type="password" id="log-pass" placeholder="Ù¾Ø§Ø³ÙˆØ±Úˆ">
        <button class="btn-auth" onclick="doLogin()">Ù„Ø§Ú¯ Ø§Ù† Ú©Ø±ÛŒÚº</button>
        <div style="margin-top: 20px;">
            <span style="color: #aaa;">Ø§Ú©Ø§Ø¤Ù†Ù¹ Ù†ÛÛŒÚº ÛÛ’ØŸ</span>
            <span class="switch-link" style="color: var(--secondary-color); cursor: pointer; font-weight: bold;" onclick="switchCard('register-card')"> Ù†ÛŒØ§ Ø¨Ù†Ø§Ø¦ÛŒÚº</span>
        </div>
    </div>

    <div id="quiz-card" class="auth-card">
        <i class="fas fa-mosque fa-4x" style="color: var(--secondary-color); margin-bottom: 20px;"></i>
        <h2>Ø§Ø³Ù„Ø§Ù…ÛŒ ØªØµØ¯ÛŒÙ‚</h2>
        <p style="color: #ddd; margin-bottom: 20px;">Ø¢Ú¯Û’ Ø¨Ú‘Ú¾Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø¯Ø±Ø³Øª Ø¬ÙˆØ§Ø¨ Ú©Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±ÛŒÚº:</p>
        <div style="text-align: right; margin-bottom: 10px; color: var(--secondary-color);">Ø³ÙˆØ§Ù„: Ø§Ø³Ù„Ø§Ù… Ú©Û’ Ú©ØªÙ†Û’ Ø¨Ù†ÛŒØ§Ø¯ÛŒ Ø§Ø±Ú©Ø§Ù† ÛÛŒÚºØŸ</div>
        <select id="quiz-ans">
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±ÛŒÚº</option>
            <option value="3">ØªÛŒÙ† (3)</option>
            <option value="5">Ù¾Ø§Ù†Ú† (5)</option>
            <option value="7">Ø³Ø§Øª (7)</option>
        </select>
        <button class="btn-auth" onclick="finishQuiz()">ØªØµØ¯ÛŒÙ‚ Ù…Ú©Ù…Ù„ Ú©Ø±ÛŒÚº</button>
    </div>
</div>

<div id="main-content" style="display: none;">
    <div class="header-wrapper">
        <div class="header">
            <div class="bismillah">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘Ù°Ù‡Ù Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…Ù°Ù†Ù Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ’Ù…Ù</div>
            <div class="site-name">Arslan Islamic Center</div>
        </div>
    </div>

    <div class="category-container">
        <div class="category-tabs" id="category-tabs"></div>
    </div>

    <div class="main-card-wrapper">
        <div class="hadith-card">
            <div id="type-label" class="type-indicator">ğŸ•Œ ÙØ±Ù…Ø§Ù†Ù Ø±Ø³ÙˆÙ„ ï·º</div>
            <div id="hadith-content"></div>
            
            <div class="action-buttons" id="action-buttons" style="display: none;">
                <button class="btn-action" onclick="copyContent()"><i class="fas fa-copy"></i> Ú©Ø§Ù¾ÛŒ Ú©Ø±ÛŒÚº</button>
                <button class="btn-action" onclick="shareContent()"><i class="fas fa-share-alt"></i> Ø´ÛŒØ¦Ø± Ú©Ø±ÛŒÚº</button>
            </div>
        </div>
    </div>

    <a href="https://wa.me/923704624316" class="fab" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>
</div>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

<script>
    const firebaseConfig = {
      apiKey: "AIzaSyDyxCJoHdHrYY-pt50_OqMMAarYRHTmOj0",
      authDomain: "deen-markaz.firebaseapp.com",
      projectId: "deen-markaz",
      storageBucket: "deen-markaz.firebasestorage.app",
      messagingSenderId: "139237530572",
      appId: "1:139237530572:web:04db9c5ae2cce6dd945b69"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    // Menu Toggle Logic
    function toggleMenu() {
        document.getElementById('dropdown').classList.toggle('show');
    }

    // Close menu when clicking outside
    window.onclick = function(event) {
        if (!event.target.closest('.menu-container')) {
            document.getElementById('dropdown').classList.remove('show');
        }
    }

    function switchCard(id) {
        document.querySelectorAll('.auth-card').forEach(c => c.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    window.doRegister = function() {
        const email = document.getElementById('reg-email').value;
        const pass = document.getElementById('reg-pass').value;
        if(!email || !pass) return alert("Ø¨Ø±Ø§Û Ú©Ø±Ù… ØªÙ…Ø§Ù… Ø®Ø§Ù†Û’ Ù¾ÙØ± Ú©Ø±ÛŒÚºÛ”");
        auth.createUserWithEmailAndPassword(email, pass).catch(err => alert(err.message));
    }

    window.doLogin = function() {
        const email = document.getElementById('log-email').value;
        const pass = document.getElementById('log-pass').value;
        if(!email || !pass) return alert("Ø¨Ø±Ø§Û Ú©Ø±Ù… ØªÙ…Ø§Ù… Ø®Ø§Ù†Û’ Ù¾ÙØ± Ú©Ø±ÛŒÚºÛ”");
        auth.signInWithEmailAndPassword(email, pass).catch(err => alert(err.message));
    }

    window.finishQuiz = function() {
        const ans = document.getElementById('quiz-ans').value;
        if(ans === "5") {
            document.getElementById('auth-layer').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            renderCategoryTabs();
            fetchAndDisplayContent("daily_hadith", "Nabi");
        } else { alert("ØºÙ„Ø· Ø¬ÙˆØ§Ø¨!"); }
    }

    auth.onAuthStateChanged(user => {
        if(user) switchCard('quiz-card');
        else switchCard('register-card');
    });

    const categories = [
        { id: "daily_hadith", name: "Ø¢Ø¬ Ú©ÛŒ Ø­Ø¯ÛŒØ«", type: "Nabi" },
        { id: "allah_farman", name: "Ø§Ù„Ù„Û Ú©Ø§ ÙØ±Ù…Ø§Ù†", type: "Allah" },
        { id: "sahih_bukhari", name: "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ", type: "Nabi" },
        { id: "sahih_muslim", name: "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…", type: "Nabi" },
        { id: "sunan_abi_dawud", name: "Ø³Ù†Ù† Ø§Ø¨ÛŒ Ø¯Ø§Ø¤Ø¯", type: "Nabi" },
        { id: "jame_tirmidhi", name: "Ø¬Ø§Ù…Ø¹ ØªØ±Ù…Ø°ÛŒ", type: "Nabi" }
    ];

    let currentCategoryId = "daily_hadith";
    let lastFetchedContent = {};

    function renderCategoryTabs() {
        const tabs = document.getElementById('category-tabs');
        tabs.innerHTML = ''; 
        categories.forEach(cat => {
            const btn = document.createElement('button');
            btn.textContent = cat.name;
            btn.className = (cat.id === currentCategoryId) ? 'category-btn active' : 'category-btn';
            btn.onclick = () => {
                currentCategoryId = cat.id;
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                fetchAndDisplayContent(cat.id, cat.type);
            };
            tabs.appendChild(btn);
        });
    }

    async function fetchAndDisplayContent(docId, docType) {
        const div = document.getElementById('hadith-content');
        const action = document.getElementById('action-buttons');
        const label = document.getElementById('type-label');
        div.innerHTML = '<p style="text-align:center;">Ù„ÙˆÚˆ ÛÙˆ Ø±ÛØ§ ÛÛ’...</p>';
        action.style.display = 'none';
        try {
            const snap = await db.collection("islamic_content").doc(docId).collection("hadith_list").orderBy('createdAt', 'desc').limit(1).get();
            if (!snap.empty) {
                const data = snap.docs[0].data();
                lastFetchedContent = data;
                label.innerText = (docType === "Allah") ? 'ğŸ“– Ù‚Ø±Ø¢Ù† Ù…Ø¬ÛŒØ¯' : 'ğŸ•Œ ÙØ±Ù…Ø§Ù†Ù Ø±Ø³ÙˆÙ„ ï·º';
                div.innerHTML = `
                    <p class="hadith-text-arabic">${data.arabic_text}</p>
                    <div class="hadith-text-urdu">${data.urdu_translation}</div>
                    <div class="reference">Ø­ÙˆØ§Ù„Û: ${data.reference}</div>
                `;
                action.style.display = 'flex';
            }
        } catch (e) { console.error(e); }
    }

    window.copyContent = function() {
        const txt = `${lastFetchedContent.arabic_text}\n\n${lastFetchedContent.urdu_translation}\n\nØ­ÙˆØ§Ù„Û: ${lastFetchedContent.reference}`;
        navigator.clipboard.writeText(txt).then(() => alert("Ú©Ø§Ù¾ÛŒ ÛÙˆ Ú¯ÛŒØ§!"));
    }

    window.shareContent = function() {
        if (navigator.share) navigator.share({ title: 'Arslan Islamic', text: lastFetchedContent.urdu_translation });
    }
</script>
</body>
</html>
